# Macro_Tree

> [!NOTE]
> 이 프로젝트는 현재 아키텍처 리팩토링 중입니다.  
> 코드와 문서가 최신 구조에 맞게 지속적으로 업데이트되고 있습니다.

트리 구조 기반 매크로 관리 애플리케이션입니다.  
실무 환경에서 생산성을 3배 향상시킨 자동화 프로그램에서 착안하여,  
보안 관련 요소를 제거하고 범용 컨셉으로 확장성과 유연성을 확보하였습니다.

*다른 언어로 읽기: [English](README.md)*

---

## 프로젝트 상태

- ✅ **Core 모듈**: 완료 (인터페이스 설계 및 기본 구현)
- ✅ **Model 계층**: 완료 (저장소, 파일, DB, 상태관리)
- 🔄 **ViewModel / View**: 진행 중 (import 경로/네이밍/책임 분리/패턴 일관화)
- 🧪 **테스트/문서/자동화**: 예정

---

## 주요 기능

- 트리 노드 이동, 삽입, 삭제
- Undo, Redo 기능
- 마우스 좌표 획득
- 그룹화 및 인스턴스 생성
- 데이터 영속성 (저장 및 불러오기)
- 계층 구조 시각화 및 조작

---

## 아키텍처 설계

- **SOLID 원칙**: SRP, OCP, LSP, ISP, DIP
- **인터페이스 기반 설계**: Protocol을 활용한 명확한 계약 정의
- **계층화 아키텍처**: Core, Model, ViewModel, View, Platforms

### 계층 구조

- **core/**: 핵심 비즈니스 로직, 인터페이스, 구현체
- **model/**: 비즈니스 로직 확장 (저장소, 서비스, 상태, 이벤트)
- **viewmodel/**: 뷰모델 계층 (상태 변환, UI 로직)
- **view/**: 뷰 계층 (PyQt6/QML UI 컴포넌트)
- **platforms/**: 플랫폼 특화 어댑터
- **test/**: 테스트 코드

<details>
<summary>프로젝트 구조</summary>

```
├── core/                     # 핵심 비즈니스 로직
│   ├── interfaces/           # 코어 인터페이스
│   └── impl/                 # 코어 구현체
├── model/                    # 비즈니스 로직 확장 계층
│   ├── store/                # 데이터 영속성 관리 (repo, file, db)
│   │   ├── repo/             # 저장소 인터페이스
│   │   ├── file/             # 파일 기반 저장소 구현체
│   │   └── db/               # DB 기반 저장소 구현체
│   ├── services/             # 비즈니스 서비스
│   ├── action/               # 액션 처리
│   └── events/               # 이벤트 처리
├── viewmodel/                # 뷰모델 계층
├── view/                     # 뷰 계층
├── platforms/                # 플랫폼 특화 코드
└── test/                     # 테스트 코드
```
</details>

## 인터페이스 구조
- **코어 인터페이스:** 트리 및 아이템 컴포넌트의 기본 인터페이스
- **모델 인터페이스:** 비즈니스 로직 인터페이스 (저장소, 상태 관리자)
- **구현 클래스:** 인터페이스의 구체적인 구현체
- **TreeStateManager:** 트리 상태 추적 및 관리
- **TreeRepository:** 데이터 영속성 작업
- **TreeViewModel:** 트리 데이터를 위한 표현 로직
- **TreeView:** 사용자 인터페이스 컴포넌트

## 요구사항
- Python 3.10 이상
- PostgreSQL (데이터 영속성)
- Windows 운영체제

## 라이선스
이 프로젝트는 MIT 라이선스를 따릅니다 - 자세한 내용은 [LICENSE](LICENSE) 파일을 참조하세요.

## 데모

현재 이 프로젝트는 아키텍처 리팩토링 중으로, 포트폴리오 제출 시점에는 다음 기능이 포함된 최소 기능 데모를 제공할 예정입니다:

- 트리 노드 생성, 편집, 삭제 기능
- 기본적인 매크로 설정 및 관리
- 간단한 UI 시각화

## 데모 영상
![main](https://user-images.githubusercontent.com/110750614/211150674-dfd5aa99-2ea1-47f3-839d-2494f83ab985.gif)
(과거 레거시 코드 기반의 데모 영상입니다)

### 상태 변화 알림을 위한 옵저버 패턴
- **결합도 최소화**: ViewModel, StateManager, EventManager 등에서 구독/알림(Observer) 구조를 사용하여, UI(View)와 직접 연결하지 않고 상태 변화를 통지합니다.
- **반응형 UI**: 데이터가 변경될 때마다 구독자(예: UI)가 자동으로 갱신되어, 반응형 인터페이스를 구현합니다.

### 데이터 접근 추상화를 위한 저장소(Repository) 패턴
- **영속성 계층 분리**: 트리 데이터의 저장/불러오기 등 데이터 접근 로직(DB, 파일 등)을 비즈니스 로직과 분리하여, 저장소 인터페이스를 통해 추상화합니다.
- **유연한 확장성**: 다양한 저장 방식(PostgreSQL, 파일 등)으로 손쉽게 확장 및 교체가 가능합니다.

### Undo/Redo 관리를 위한 상태(State) 패턴
- **상태 전이 캡슐화**: 트리의 상태 이력을 StateManager가 관리하며, Undo/Redo 기능을 제공합니다.
- **단순한 ViewModel**: ViewModel은 상태 관리(이력, 복원 등)를 StateManager에 위임하여, 코드가 단순해집니다.

## 코드 품질 및 표준

- **코딩 스타일 가이드**: 일관성을 위해 `CODING_STYLE.md`에 정의된 코딩 스타일을 따릅니다.
- **린터 및 포매터**: 코드 품질 유지를 위해 `flake8`(린터)와 `isort`(임포트 정렬, `setup.cfg`에 설정)을 사용합니다.
- **정적 타입 검사**: 코드 신뢰성과 유지보수성을 높이기 위해 타입 힌트를 적극적으로 사용하며, `mypy`(`mypy.ini`에 설정)로 정적 타입 검사를 수행합니다. 